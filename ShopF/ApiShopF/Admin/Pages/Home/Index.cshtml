@page
@model Admin.Pages.Home.IndexModel
@{
}
<section class="main container-fluid">
    <div class="row">
        <div class="col-12 col-lg-3 col-xl-2 sidebar vh-100">
            <div class="d-flex justify-content-between align-items-center py-2 mt-3">
                <div class="d-flex align-items-center">
                    <span class="bg-primary p-2 rounded d-flex justify-content-center align-items-center mr-2">
                        <i class="feather-shopping-bag text-white"></i>
                    </span>
                    <span class="font-weight-bolder h4 mb-0 mt-1 text-uppercase text-primary">
                        my shop
                    </span>
                </div>
                <button class="hide-sidebar-btn btn btn-light d-block d-lg-none">
                    <i class="feather-x text-primary"></i>
                </button>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li class="menu-item">
                        <a href="/Home" class="menu-item-link active">
                            <span> <i class="feather-home"></i> DashBoard </span>
                        </a>
                    </li>
                    <li class="menu-spacer"></li>
                    <li class="menu-title"><span>Manage Order</span></li>
                    <li class="menu-item">
                        <a href="/Orders/Add" class="menu-item-link">
                            <span> <i class="feather-plus-circle"></i> Add Order </span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="/Orders/List" class="menu-item-link">
                            <span> <i class="feather-list"></i> Order List </span>
                            <span class="badge badge-pill bg-white shadow-sm text-primary p-1">@Model.TotalOrders</span>
                        </a>
                    </li>
                    <!-- stop -->
                    <li class="menu-spacer"></li>
                    <li class="menu-spacer"></li>
                    <li class="menu-title"><span>Manage Product</span></li>
                    <li class="menu-item">
                        <a href="/Products/Add" class="menu-item-link">
                            <span> <i class="feather-plus-circle"></i> Add Product </span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="/Products/List" class="menu-item-link">
                            <span> <i class="feather-list"></i> Product List </span>
                            <span class="badge badge-pill bg-white shadow-sm text-primary p-1">@Model.TotalProducts</span>
                        </a>
                    </li>
                    <li class="menu-spacer"></li>
                    <li class="menu-spacer"></li>
                    <li class="menu-title"><span>Manage Category</span></li>
                    <li class="menu-item">
                        <a href="/Categories/Add" class="menu-item-link">
                            <span> <i class="feather-plus-circle"></i> Add Category </span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="/Categories/List" class="menu-item-link">
                            <span> <i class="Categories/List"></i> Category List </span>
                            <span class="badge badge-pill bg-white shadow-sm text-primary p-1">@Model.TotalCategories</span>
                        </a>
                    </li>
                    <li class="menu-spacer"></li>
                    <li class="menu-spacer"></li>
                    <li class="menu-title"><span>Manage User</span></li>
                    <li class="menu-item">
                        <a href="/Users/Add" class="menu-item-link">
                            <span> <i class="feather-plus-circle"></i> Add User </span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="/Users/List" class="menu-item-link">
                            <span> <i class="feather-list"></i> User List </span>
                            <span class="badge badge-pill bg-white shadow-sm text-primary p-1">@Model.TotalUsers</span>
                        </a>
                    </li>
                    <li class="menu-spacer"></li>
                </ul>
            </nav>
        </div>
        <div class="col-12 col-lg-9 col-xl-10 content py-3 vh-100">
            <div class="row header mb-3">
                <div class="col-12">
                    <div class="p-2 bg-primary d-flex justify-content-between align-items-center rounded">
                        <button class="show-sidebar-btn btn btn-primary d-block d-lg-none">
                            <i class="feather-menu text-light"></i>
                        </button>
                        <form action="" class="d-none d-md-none d-lg-block">
                            <div class="form-inline">
                                @* <input type="text" class="form-control mr-2" />
                                <button class="btn btn-light">
                                <i class="feather-search text-primary"></i>
                                </button> *@
                            </div>
                        </form>
                        <div class="dropdown">
                            <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="img/user/me.jpeg" class="user-img shadow-sm" alt="" />
                                Chan Myae
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#">Action</a>
                                <a class="dropdown-item" href="#">Another action</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- stop -->
            <div class="row">
                <div class="col-12 col-md-6 col-lg-6 col-xl-3">
                    <div class="card mb-3 status-card" onclick="go('item-list.html')">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-3">
                                    <i class="feather-shopping-bag h1 text-primary"></i>
                                </div>
                                <div class="col-9">
                                    <p class="mb-1 h4 font-weight-bolder">
                                        <span class="counter-up">@Model.TotalOrders</span>
                                    </p>
                                    <p class="mb-0 text-black-50">Total Order</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-6 col-xl-3">
                    <div class="card mb-3 status-card" onclick="go('')">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-3">
                                    <i class="feather-user h1 text-primary"></i>
                                </div>
                                <div class="col-9">
                                    <p class="mb-1 h4 font-weight-bolder">
                                        <span class="counter-up">@Model.TotalUsers</span>
                                    </p>
                                    <p class="mb-0 text-black-50">Total User</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-6 col-xl-3">
                    <div class="card mb-3 status-card" onclick="go('item-list.html')">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-3">
                                    <i class="feather-package h1 text-primary"></i>
                                </div>
                                <div class="col-9">
                                    <p class="mb-1 h4 font-weight-bolder">
                                        <span class="counter-up">@Model.TotalProducts</span>
                                    </p>
                                    <p class="mb-0 text-black-50">Total Items</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @* <div class="col-12 col-md-6 col-lg-6 col-xl-3">
                <div class="card mb-3 status-card" onclick="go('https://google.com')">
                <div class="card-body">
                <div class="row align-items-center">
                <div class="col-3">
                <i class="feather-map-pin h1 text-primary"></i>
                </div>
                <div class="col-9">
                <p class="mb-1 h4 font-weight-bolder">
                <span class="counter-up">14</span>
                </p>
                <p class="mb-0 text-black-50">Support Location</p>
                </div>
                </div>
                </div>
                </div>
                </div> *@
            </div>
            <div class="row align-items-end">
                @* <div class="col-12 col-xl-7">
                <div class="card overflow-hidden shadow mb-4">
                <div class="">
                <div class="d-flex justify-content-between align-items-center p-2">
                <h4 class="mb-0">Order & viewer</h4>
                <div class="">
                <img src="img/user/avatar1.jpg" class="ov-img rounded-circle" alt="" />
                <img src="img/user/avatar2.jpg" class="ov-img rounded-circle" alt="" />
                <img src="img/user/avatar3.jpg" class="ov-img rounded-circle" alt="" />
                <img src="img/user/avatar4.jpg" class="ov-img rounded-circle" alt="" />
                <img src="img/user/avatar5.jpg" class="ov-img rounded-circle" alt="" />
                </div>
                </div>
                <canvas id="ov" height="120"></canvas>
                </div>
                </div>
                </div> *@
                <div class="col-12 col-xl-7">
                    <div class="card mb-4 overflow-hidden">
                        <div class="">
                            <div class="d-flex justify-content-between align-items-center p-2">
                                <h4 class="mb-3 font-weight-bolder mt-1">
                                    Orders List
                                </h4>
                                <div class="">
                                    <i class="feather-more-vertical h4 mb-0 text-primary"></i>
                                </div>
                            </div>
                            <table class="table table-hover mb-0 sub-list table-responsive">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>User ID</th>
                                        <th>Address</th>
                                        <th>Create Date</th>
                                        <th>Update Date</th>
                                        <th>Status</th>
                                        <th>Amount</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var order in Model.Orders)
                                    {
                                        <tr id="order-row-@order.OrderId">
                                            <td>@order.OrderId</td>
                                            <td>@order.UserId</td>
                                            <td>@order.OrderAddress</td>
                                            <td>@order.CreatedAt</td>
                                            <td>@order.UpdatedAt</td>
                                            <td>
                                                @if (order.StatusId == 1)
                                                {
                                                    <span class="badge badge-pill badge-warning">Đang chờ</span>
                                                }
                                                else if (order.StatusId == 2)
                                                {
                                                    <span class="badge badge-pill badge-success">Đã xác nhận</span>
                                                }
                                                else if (order.StatusId == 3)
                                                {
                                                    <span class="badge badge-pill badge-success">Đã giao hàng</span>
                                                }
                                                else if (order.StatusId == 4)
                                                {
                                                    <span class="badge badge-pill badge-danger">Đã hủy</span>
                                                }
                                            </td>
                                            <td>$ @order.Total</td>
                                            <td class="center-align">
                                                <a href="/Edit/@order.OrderId"><i class="feather-edit-3 text-warning"></i></a>
                                                <a href="javascript:void(0);" onclick="deleteOrder(@order.OrderId)"><i class="feather-trash-2 text-danger"></i></a>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-xl-5">
                    <div class="card mb-4 item-carousel-card">
                        <div class="card-body carousel-height">
                            <div id="carouselExampleIndicators" class="carousel slide item-carousel"
                                 data-ride="carousel">
                                <ol class="carousel-indicators carousel-buttom">
                                    <li data-target="#carouselExampleIndicators" data-slide-to="0"
                                        class="active bg-secondary"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="1"
                                        class="bg-secondary"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="2"
                                        class="bg-secondary"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="3"
                                        class="bg-secondary"></li>
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <div class="item-card">
                                            <div class="d-flex justify-content-between align-items-end">
                                                <div class="w-50">
                                                    <h4 class="font-weight-bolder">Coffee Cup</h4>
                                                    <p class="font-weight-bolder text-black-50 mb-3">
                                                        500 MMK
                                                    </p>
                                                    <div class="progress mb-4">
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width: 75%" aria-valuenow="25" aria-valuemin="0"
                                                             aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <img src="img/item/item1.png" class="item-card-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="item-card">
                                            <div class="d-flex justify-content-between align-items-end">
                                                <div class="w-50">
                                                    <h4 class="font-weight-bolder">Stick</h4>
                                                    <p class="font-weight-bolder text-black-50 mb-3">
                                                        1500 MMK
                                                    </p>
                                                    <div class="progress mb-4">
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width: 65%" aria-valuenow="25" aria-valuemin="0"
                                                             aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <img src="img/item/item2.png" class="item-card-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="item-card">
                                            <div class="d-flex justify-content-between align-items-end">
                                                <div class="w-50">
                                                    <h4 class="font-weight-bolder">Book</h4>
                                                    <p class="font-weight-bolder text-black-50 mb-3">
                                                        200 MMK
                                                    </p>
                                                    <div class="progress mb-4">
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width: 95%" aria-valuenow="25" aria-valuemin="0"
                                                             aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <img src="img/item/item3.png" class="item-card-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="item-card">
                                            <div class="d-flex justify-content-between align-items-end">
                                                <div class="w-50">
                                                    <h4 class="font-weight-bolder">Name Card</h4>
                                                    <p class="font-weight-bolder text-black-50 mb-3">
                                                        800 MMK
                                                    </p>
                                                    <div class="progress mb-4">
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width: 35%" aria-valuenow="25" aria-valuemin="0"
                                                             aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <img src="img/item/item4.png" class="item-card-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @* <div class="col-12 col-md-6 col-xl-5">
                <div class="card mb-4">
                <div class="card-body">
                <div class="d-flex justify-content-between align-items-center p-2">
                <h4 class="mb-0">Order & Place</h4>
                <div class="">
                <i class="feather-pie-chart h4 mb-0 text-primary"></i>
                </div>
                </div>
                <canvas id="op" height="200"></canvas>
                </div>
                </div>
                </div> *@
            </div>
        </div>
    </div>
</section>

<script>
    function deleteOrder(orderId) {
        if (confirm("Are you sure you want to delete this order?")) {
            $.ajax({
                url: "http://localhost:5000/api/Admin/Orders/" + orderId,
                type: "DELETE",
                success: function (result, status, xhr) {
                    var row = document.getElementById("order-row-" + orderId);
                    if (row) {
                        row.parentElement.removeChild(row);
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Error deleting order:", xhr);
                }
            });
        }
    }
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script> -->
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="vendor/way_point/jquery.waypoints.min.js"></script>
<script src="vendor/counter_up/counter_up.js"></script>
<script src="vendor/chart_js/Chart.min.js"></script>
<script src="js/script.js"></script>